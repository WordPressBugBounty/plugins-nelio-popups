(()=>{"use strict";var e={n:n=>{var t=n&&n.__esModule?()=>n.default:()=>n;return e.d(t,{a:t}),t},d:(n,t)=>{for(var o in t)e.o(t,o)&&!e.o(n,o)&&Object.defineProperty(n,o,{enumerable:!0,get:t[o]})},o:(e,n)=>Object.prototype.hasOwnProperty.call(e,n)};const n=window.ReactJSXRuntime,t=window.wp.element,o=window.wp.domReady,a=e.n(o)(),r=window.wp.apiFetch,i=e.n(r)(),c=window.wp.components,p=window.wp.i18n;const d=({popupId:e,initialValue:t})=>{const{enabled:o,enable:a,isSynching:r}=u(e,t);return(0,n.jsx)(c.ToggleControl,{disabled:r,label:(0,n.jsx)("span",{className:"screen-reader-text",children:(0,p._x)("Activate popup","command","nelio-popups")}),checked:o,onChange:e=>{a(e)}})},u=(e,n)=>{const[o,a]=(0,t.useState)(n),[r,c]=(0,t.useState)(!1);return{enabled:o,enable:n=>{return t=void 0,r=void 0,d=function*(){c(!0),a(n);try{yield i({path:`/wp/v2/nelio_popup/${e}`,method:"POST",data:{nelio_popups_is_enabled:n}})}catch(e){a(o)}c(!1)},new((p=void 0)||(p=Promise))((function(e,n){function o(e){try{i(d.next(e))}catch(e){n(e)}}function a(e){try{i(d.throw(e))}catch(e){n(e)}}function i(n){var t;n.done?e(n.value):(t=n.value,t instanceof p?t:new p((function(e){e(t)}))).then(o,a)}i((d=d.apply(t,r||[])).next())}));var t,r,p,d},isSynching:r}};a((function(){document.querySelectorAll(".nelio-popups-active-wrapper").forEach((e=>{const o=Number.parseInt(e.getAttribute("data-id")||"");if(isNaN(o))return;const a="true"===e.getAttribute("data-enabled");var r,i;r=(0,n.jsx)(d,{popupId:o,initialValue:a}),(i=e)&&(t.createRoot?(0,t.createRoot)(i).render(r):(0,t.render)(r,i))}))}))})();